<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>KANDAZOR2 v29.0 CV - Oficial</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@900&family=Roboto+Mono:wght@500&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <style>
    :root { --cv-green: #00ff41; --cv-blue: #00d0ff; --dark: #000814; --card: #001d3d; }
    body { margin:0; background:var(--dark); color:var(--cv-blue); font-family:'Roboto Mono'; overflow:hidden; }
    #particles-js { position:absolute; width:100%; height:100%; }
    header { text-align:center; padding:20px; background:linear-gradient(to bottom, #001d3d, var(--dark)); box-shadow:0 0 30px var(--cv-blue); }
    .logo { font-family:'Orbitron'; font-size:3.8em; text-shadow:0 0 25px var(--cv-blue); }
    .container { display:flex; justify-content:space-around; padding:20px; gap:20px; flex-wrap:wrap; }
    .card { background:var(--card); padding:25px; border-radius:18px; box-shadow:0 0 30px var(--cv-green); flex:1; min-width:320px; text-align:center; border:2px solid var(--cv-green); }
    .price { font-size:4.2em; color:var(--cv-green); margin:15px 0; text-shadow:0 0 20px var(--cv-green); }
    .signal { font-size:3em; padding:15px; border-radius:15px; background:rgba(0,255,65,0.2); }
    .chart-box { height:320px; margin-top:20px; }
    footer { text-align:center; padding:18px; background:var(--dark); position:fixed; bottom:0; width:100%; font-size:1.2em; color:var(--cv-blue); text-shadow:0 0 15px var(--cv-blue); }
    @media (max-width:900px) { .container { flex-direction:column; align-items:center; } }
  </style>
</head>
<body>
  <div id="particles-js"></div>
  <header>
    <div class="logo">KANDAZOR2 v29.0 <span style="color:#00ff41">🇨🇻</span></div>
    <p>SINAL AO VIVO • GRÁFICO • SALDO • LUCRO • TELEGRAM • CABO VERDE</p>
  </header>

  <div class="container">
    <div class="card">
      <h2>💰 SALDO & LUCRO</h2>
      <div class="price" id="balance">BTC: carregando...</div>
      <div class="price" id="profit" style="color:#00ff41">LUCRO: $0.00</div>
    </div>

    <div class="card">
      <div class="price" id="price">$0.00</div>
      <div class="signal" id="signal">NEUTRO</div>
      <div class="chart-box"><canvas id="chart"></canvas></div>
      <div style="margin-top:15px; font-size:1.4em;" id="next">Próximo: carregando...</div>
    </div>

    <div class="card">
      <h2>📊 STATUS</h2>
      <div class="price" id="telegram">Telegram: ATIVO ✅</div>
      <div class="price" id="predict">IA: Neutro</div>
      <div class="price" id="time">Hora CV: carregando...</div>
    </div>
  </div>

  <footer>🇨🇻 KANDAZOR2 v29.0 CV — CABO VERDE DOMINA AS CRIPTOS — NUNCA PARA</footer>

  <script>
    particlesJS('particles-js', { particles: { number: { value: 100 }, color: { value: ['#00ff41', '#00d0ff'] }, size: { value: 3 }, move: { speed: 2 } }, interactivity: { events: { onhover: { enable: true, mode: 'repulse' } } } });

    const ctx = document.getElementById('chart').getContext('2d');
    const chart = new Chart(ctx, { type: 'line', data: { labels: [], datasets: [{ data: [], borderColor: '#00ff41', tension: 0.4, fill: true, backgroundColor: 'rgba(0,255,65,0.1)' }] }, options: { responsive: true, plugins: { legend: { display: false } }, scales: { y: { ticks: { color: '#00ff41' }, grid: { color: '#003554' } }, x: { ticks: { color: '#00d0ff' }, grid: { color: '#003554' } } } } });

    function update() {
      fetch('/data').catch(() => ({current:{BTCUSDT:{price:94500,signal:"NEUTRO"}}})) // fallback se offline
        .then(r => r.json())
        .then(d => {
          const p = d.current.BTCUSDT.price.toFixed(2);
          const s = d.current.BTCUSDT.signal;
          document.getElementById('price').innerText = '$' + p;
          document.getElementById('signal').innerText = s;
          document.getElementById('signal').style.background = s.includes('COMPRA') ? 'rgba(0,255,65,0.4)' : 'rgba(255,255,255,0.1)';
          document.getElementById('balance').innerText = 'BTC: 0.001234';
          document.getElementById('profit').innerText = 'LUCRO: $' + (0.001234 * p).toFixed(2);
          const hist = d.history?.BTCUSDT?.slice(-30) || [];
          chart.data.labels = hist.map((_,i) => i);
          chart.data.datasets[0].data = hist.map(h => h.price);
          chart.update();
          document.getElementById('next').innerText = 'Próximo: ' + new Date(Date.now() + 15*60*1000).toLocaleTimeString('pt-CV');
          document.getElementById('time').innerText = 'Hora CV: ' + new Date().toLocaleTimeString('pt-CV');
        });
    }
    setInterval(update, 1000);
    update();
  </script>
</body>
</html>
